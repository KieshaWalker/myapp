<!DOCTYPE html>
<!--
  habits/new.ejs — Form to create a new habit.
  We use <%- include('../partials/nav') %> to pull in the shared navigation (unescaped so it renders HTML).
  Checkboxes post their name only when checked; we detect presence server-side to set booleans.
-->
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>New Habit</title>
  <link rel="stylesheet" href="/index.css" />
</head>
<body>
  <header>
    <h1>Create a New Habit</h1>
    <%- include('../partials/nav') %>
  </header>

  <main>
  <form action="/habits" method="POST">
      <div>
        <label for="title">Title</label>
        <input id="title" type="text" name="title" required />
      </div>
      <div>
        <label for="description">Description</label>
        <input id="description" type="text" name="description" />
      </div>
      <div>
        <label for="frequency">Frequency</label>
        <select id="frequency" name="frequency">
          <option value="daily">Daily</option>
          <option value="weekly">Weekly</option>
          <option value="monthly">Monthly</option>
        </select>
      </div>
      <div>
        <label for="targetCount">Target Count</label>
        <input id="targetCount" type="number" name="targetCount" value="1" min="1" />
      </div>
      <div>
        <label for="duration">Duration (days)</label>
        <input id="duration" type="number" name="duration" value="0" min="0" />
      </div>

      <!-- Optional Habitica configuration (per-habit overrides) -->
      <fieldset>
        <legend>Habitica Options (optional)</legend>
        <div>
          <label for="habiticaType">Task Type</label>
          <select id="habiticaType" name="habiticaType">
            <option value="habit">Habit</option>
            <option value="daily">Daily</option>
            <option value="todo">To‑Do</option>
            <option value="reward">Reward</option>
          </select>
        </div>
        <div>
          <!-- If unchecked, the field is omitted from req.body; controller treats undefined as false. -->
          <label>Scoring</label>
          <label><input type="checkbox" name="habiticaUp" checked> Up (+)</label>
          <label><input type="checkbox" name="habiticaDown" checked> Down (−)</label>
        </div>
        <div>
          <label for="habiticaPriority">Priority</label>
          <select id="habiticaPriority" name="habiticaPriority">
            <option value="0.1">Trivial (0.1)</option>
            <option value="1" selected>Easy (1)</option>
            <option value="1.5">Medium (1.5)</option>
            <option value="2">Hard (2)</option>
          </select>
        </div>
        <div>
          <label for="habiticaAttribute">Attribute</label>
          <select id="habiticaAttribute" name="habiticaAttribute">
            <option value="str">Strength</option>
            <option value="int">Intelligence</option>
            <option value="con">Constitution</option>
            <option value="per">Perception</option>
          </select>
        </div>
        <div>
          <label for="habiticaNotes">Habitica Notes</label>
          <input id="habiticaNotes" type="text" name="habiticaNotes" placeholder="Optional notes shown in Habitica" />
        </div>
        <div>
          <label for="habiticaTags">Tags (comma‑separated)</label>
          <input id="habiticaTags" type="text" name="habiticaTags" placeholder="e.g. health, morning" />
        </div>
      </fieldset>
      <button type="submit">Create Habit</button>
    </form>
  </main>
</body>
</html>
